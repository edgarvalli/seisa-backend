{"version":3,"sources":["helpers/config.js","helpers/request.js","views/Reportes.jsx"],"names":["api","headers","method","Accept","get","url","undefined","this","body","fetch","req","ok","error","message","statusText","json","res","post","params","JSON","stringify","delete","Reportes","state","projects","loading","projectId","sDate","eDate","data","rows","keys","fetchOC","a","async","setState","alert","CCODIGOPROYECTO","CNOMBREPROYECTO","request","response","document","createElement","href","setAttribute","click","console","log","selectProject","ev","target","value","handleChange","name","GetProjects","show","options","view","label","onClick","props","navigation","go","container","spacing","item","md","id","select","fullWidth","onChange","helperText","map","project","i","key","CIDPROYECTO","type","InputLabelProps","shrink","variant","color","className","expandIcon","row","CIDDOCUMENTO","CSERIEDOCUMENTO","CFOLIO","CFECHA","CNOMBREPRODUCTO","COBSERVAMOV","CUNIDADESCAPTURADAS","CPRECIOCAPTURADO","CNETO","React","Component"],"mappings":"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","file":"static/js/8.fbbe6e9f.chunk.js","sourcesContent":["// const host = 'http://localhost:3080';\r\nexport const api ='/api/proyectos'","import { api } from \"./config\";\r\n\r\nexport default {\r\n  headers: {\r\n    method: \"get\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\"\r\n    }\r\n  },\r\n  async get(url) {\r\n    try {\r\n      if (this.headers.body !== undefined) delete this.headers.body;\r\n      this.headers.method = \"get\";\r\n      const req = await fetch(api + url, this.headers);\r\n      if (!req.ok) return { error: true, message: req.statusText };\r\n      const res = await req.json();\r\n      return res;\r\n    } catch (message) {\r\n      return { error: true, message };\r\n    }\r\n  },\r\n  async post(url, params = {}) {\r\n    try {\r\n      this.headers.body = JSON.stringify(params);\r\n      this.headers.method = \"post\";\r\n      const req = await fetch(api + url, this.headers);\r\n      if (!req.ok) return { error: true, message: req.statusText };\r\n      const res = await req.json();\r\n      return res;\r\n    } catch (message) {\r\n      return { error: true, message };\r\n    }\r\n  },\r\n  async delete(url) {\r\n    try {\r\n      if (this.headers.body !== undefined) delete this.headers.body;\r\n      this.headers.method = \"delete\";\r\n      const req = await fetch(api + url, this.headers);\r\n      if (!req.ok) return { error: true, message: req.statusText };\r\n      const res = await req.json();\r\n      return res;\r\n    } catch (message) {\r\n      return { error: true, message };\r\n    }\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport Loader from \"../components/Loader\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport request from \"../helpers/request\";\r\nimport {\r\n  Icon,\r\n  Grid,\r\n  TextField,\r\n  MenuItem,\r\n  Button,\r\n  ExpansionPanel,\r\n  ExpansionPanelDetails,\r\n  ExpansionPanelSummary,\r\n  TableRow,\r\n  TableCell,\r\n  Table,\r\n  TableBody,\r\n  TableHead\r\n} from \"@material-ui/core\";\r\n\r\nclass Reportes extends React.Component {\r\n  state = {\r\n    projects: [],\r\n    loading: true,\r\n    projectId: \"\",\r\n    sDate: \"\",\r\n    eDate: \"\",\r\n    data: {\r\n      rows: {},\r\n      keys: []\r\n    }\r\n  };\r\n  componentDidMount() {\r\n    this.GetProjects();\r\n  }\r\n\r\n  async GetProjects() {\r\n    try {\r\n      const response = await request.get(\"/lista\");\r\n      if (response.error) {\r\n        console.log(response.message);\r\n        alert(\"Favor de revisar la consola.\");\r\n        this.setState({ loading: false });\r\n      } else {\r\n        this.setState({ projects: response.data, loading: false });\r\n      }\r\n    } catch (message) {\r\n      console.log(message);\r\n      alert(\"Favor de revisar la consola.\");\r\n    }\r\n  }\r\n\r\n  fetchOC = async () => {\r\n    try {\r\n      this.setState({ loading: true });\r\n      const { projectId, sDate, eDate, projects } = this.state;\r\n      if (projectId === \"\") return alert(\"Debe de seleccionar un proyecto\");\r\n      if (sDate === \"\") return alert(\"Debe de seleccionar la fecha inicial\");\r\n      if (eDate === \"\") return alert(\"Debe de seleccionar la fecha final\");\r\n      let url = \"/estado-cuentas?\";\r\n      url += \"segmento=\" + projects[projectId].CCODIGOPROYECTO + \"&\";\r\n      url += \"proyecto=\" + projects[projectId].CNOMBREPROYECTO + \"&\";\r\n      url += \"fechaInicial=\" + sDate + \"&\";\r\n      url += \"fechaFinal=\" + eDate;\r\n      const response = await request.get(url);\r\n      this.setState({ loading: false });\r\n      if (response.error) return alert(response.message);\r\n\r\n      let a = document.createElement(\"a\");\r\n      a.href = \"/api/proyectos/reporte/\" + response.data;\r\n      a.setAttribute(\r\n        \"download\",\r\n        \"Reporte de cuentas  - \" + projects[projectId].CNOMBREPROYECTO\r\n      );\r\n      a.click();\r\n      a = null;\r\n    } catch (error) {\r\n      alert(\"Ocurrio un error, favor de revisar en la consola\");\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  selectProject = ev => {\r\n    this.setState({ projectId: ev.target.value });\r\n  };\r\n  handleChange = ev => {\r\n    const { value, name } = ev.target;\r\n    this.setState({ [name]: value });\r\n  };\r\n  render() {\r\n    const { projects, loading, projectId, data } = this.state;\r\n    return (\r\n      <>\r\n        <Loader show={loading} />\r\n        <Navbar\r\n          options={[{ view: \"Reportes\", label: \"Reportes\" }]}\r\n          onClick={view => this.props.navigation.go(view)}\r\n        />\r\n        <Grid container spacing={4}>\r\n          <Grid item md={4}>\r\n            <TextField\r\n              id=\"standard-select-currency\"\r\n              select\r\n              fullWidth\r\n              label=\"Selecciona un Proyecto\"\r\n              value={projectId}\r\n              onChange={this.selectProject}\r\n              helperText=\"Por favor selecciona una opcion\"\r\n            >\r\n              {projects.map((project, i) => (\r\n                <MenuItem key={project.CIDPROYECTO} value={`${i}`}>\r\n                  {project.CCODIGOPROYECTO + \"  - \" + project.CNOMBREPROYECTO}\r\n                </MenuItem>\r\n              ))}\r\n            </TextField>\r\n          </Grid>\r\n          <Grid item md={3}>\r\n            <TextField\r\n              fullWidth\r\n              type=\"date\"\r\n              name=\"sDate\"\r\n              onChange={this.handleChange}\r\n              label=\"Fecha Inicial\"\r\n              InputLabelProps={{\r\n                shrink: true\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item md={3}>\r\n            <TextField\r\n              fullWidth\r\n              type=\"date\"\r\n              name=\"eDate\"\r\n              onChange={this.handleChange}\r\n              label=\"Fecha Final\"\r\n              InputLabelProps={{\r\n                shrink: true\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item md={2}>\r\n            <Button variant=\"contained\" color=\"primary\" onClick={this.fetchOC}>\r\n              Buscar\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n        <div className=\"mt-2\">\r\n          {data.keys.map(key => (\r\n            <ExpansionPanel key={key}>\r\n              <ExpansionPanelSummary\r\n                expandIcon={<Icon>expanded_more_icon</Icon>}\r\n              >\r\n                {key}\r\n              </ExpansionPanelSummary>\r\n              <ExpansionPanelDetails>\r\n                <Table>\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell>O.C.</TableCell>\r\n                      <TableCell>Fecha</TableCell>\r\n                      <TableCell>Descripción</TableCell>\r\n                      <TableCell>Detalle</TableCell>\r\n                      <TableCell>Cantidad</TableCell>\r\n                      <TableCell>Precio</TableCell>\r\n                      <TableCell>Total</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {data.rows[key].map(row => (\r\n                      <TableRow key={row.CIDDOCUMENTO}>\r\n                        <TableCell>\r\n                          {row.CSERIEDOCUMENTO + \" - \" + row.CFOLIO}\r\n                        </TableCell>\r\n                        <TableCell>{row.CFECHA}</TableCell>\r\n                        <TableCell>{row.CNOMBREPRODUCTO}</TableCell>\r\n                        <TableCell>{row.COBSERVAMOV}</TableCell>\r\n                        <TableCell>{row.CUNIDADESCAPTURADAS}</TableCell>\r\n                        <TableCell>{row.CPRECIOCAPTURADO}</TableCell>\r\n                        <TableCell>{row.CNETO}</TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                  </TableBody>\r\n                </Table>\r\n              </ExpansionPanelDetails>\r\n            </ExpansionPanel>\r\n          ))}\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Reportes;\r\n"],"sourceRoot":""}