(this["webpackJsonpseisa-project"]=this["webpackJsonpseisa-project"]||[]).push([[8],{119:function(e,t,a){"use strict";var r=a(118),n=a.n(r),c="http://api.seisaenergia.com/api/proyectos";t.a={headers:{method:"get",headers:{Accept:"application/json","Content-Type":"application/json"}},get:function(e){var t,a;return n.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,void 0!==this.headers.body&&delete this.headers.body,this.headers.method="get",r.next=5,n.a.awrap(fetch(c+e,this.headers));case 5:if((t=r.sent).ok){r.next=8;break}return r.abrupt("return",{error:!0,message:t.statusText});case 8:return r.next=10,n.a.awrap(t.json());case 10:return a=r.sent,r.abrupt("return",a);case 14:return r.prev=14,r.t0=r.catch(0),r.abrupt("return",{error:!0,message:r.t0});case 17:case"end":return r.stop()}}),null,this,[[0,14]])},post:function(e){var t,a,r,s=arguments;return n.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:{},l.prev=1,this.headers.body=JSON.stringify(t),this.headers.method="post",l.next=6,n.a.awrap(fetch(c+e,this.headers));case 6:if((a=l.sent).ok){l.next=9;break}return l.abrupt("return",{error:!0,message:a.statusText});case 9:return l.next=11,n.a.awrap(a.json());case 11:return r=l.sent,l.abrupt("return",r);case 15:return l.prev=15,l.t0=l.catch(1),l.abrupt("return",{error:!0,message:l.t0});case 18:case"end":return l.stop()}}),null,this,[[1,15]])},delete:function(e){var t,a;return n.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,void 0!==this.headers.body&&delete this.headers.body,this.headers.method="delete",r.next=5,n.a.awrap(fetch(c+e,this.headers));case 5:if((t=r.sent).ok){r.next=8;break}return r.abrupt("return",{error:!0,message:t.statusText});case 8:return r.next=10,n.a.awrap(t.json());case 10:return a=r.sent,r.abrupt("return",a);case 14:return r.prev=14,r.t0=r.catch(0),r.abrupt("return",{error:!0,message:r.t0});case 17:case"end":return r.stop()}}),null,this,[[0,14]])}}},63:function(e,t,a){"use strict";a.r(t);var r=a(13),n=a(118),c=a.n(n),s=a(32),l=a(33),o=a(36),u=a(34),i=a(37),p=a(0),h=a.n(p),d=a(35),m=a(38),E=a(119),f=a(79),v=a(156),b=a(133),C=a(80),O=a(157),g=a(160),y=a(109),x=a(155),k=a(150),j=a(151),D=a(152),w=a(153),P=a(154),R=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={projects:[],loading:!0,projectId:"",sDate:"",eDate:"",data:{rows:{},keys:[]}},a.fetchOC=function(){var e,t,r,n,s,l,o,u;return c.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,a.setState({loading:!0}),e=a.state,t=e.projectId,r=e.sDate,n=e.eDate,s=e.projects,""!==t){i.next=5;break}return i.abrupt("return",alert("Debe de seleccionar un proyecto"));case 5:if(""!==r){i.next=7;break}return i.abrupt("return",alert("Debe de seleccionar la fecha inicial"));case 7:if(""!==n){i.next=9;break}return i.abrupt("return",alert("Debe de seleccionar la fecha final"));case 9:return l="/estado-cuentas?",l+="segmento="+s[t].CCODIGOPROYECTO+"&",l+="proyecto="+s[t].CNOMBREPROYECTO+"&",l+="fechaInicial="+r+"&",l+="fechaFinal="+n,i.next=16,c.a.awrap(E.a.get(l));case 16:if(o=i.sent,a.setState({loading:!1}),!o.error){i.next=20;break}return i.abrupt("return",alert(o.message));case 20:(u=document.createElement("a")).href="/api/proyectos/reporte/"+o.data,u.setAttribute("download","Reporte de cuentas  - "+s[t].CNOMBREPROYECTO),u.click(),u=null,i.next=31;break;case 27:i.prev=27,i.t0=i.catch(0),alert("Ocurrio un error, favor de revisar en la consola"),console.log(i.t0);case 31:case"end":return i.stop()}}),null,null,[[0,27]])},a.selectProject=function(e){a.setState({projectId:e.target.value})},a.handleChange=function(e){var t=e.target,n=t.value,c=t.name;a.setState(Object(r.a)({},c,n))},a}return Object(i.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.GetProjects()}},{key:"GetProjects",value:function(){var e;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.a.awrap(E.a.get("/lista"));case 3:(e=t.sent).error?(console.log(e.message),alert("Favor de revisar la consola."),this.setState({loading:!1})):this.setState({projects:e.data,loading:!1}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),alert("Favor de revisar la consola.");case 11:case"end":return t.stop()}}),null,this,[[0,7]])}},{key:"render",value:function(){var e=this,t=this.state,a=t.projects,r=t.loading,n=t.projectId,c=t.data;return h.a.createElement(h.a.Fragment,null,h.a.createElement(d.a,{show:r}),h.a.createElement(m.a,{options:[{view:"Reportes",label:"Reportes"}],onClick:function(t){return e.props.navigation.go(t)}}),h.a.createElement(f.a,{container:!0,spacing:4},h.a.createElement(f.a,{item:!0,md:4},h.a.createElement(v.a,{id:"standard-select-currency",select:!0,fullWidth:!0,label:"Selecciona un Proyecto",value:n,onChange:this.selectProject,helperText:"Por favor selecciona una opcion"},a.map((function(e,t){return h.a.createElement(b.a,{key:e.CIDPROYECTO,value:"".concat(t)},e.CCODIGOPROYECTO+"  - "+e.CNOMBREPROYECTO)})))),h.a.createElement(f.a,{item:!0,md:3},h.a.createElement(v.a,{fullWidth:!0,type:"date",name:"sDate",onChange:this.handleChange,label:"Fecha Inicial",InputLabelProps:{shrink:!0}})),h.a.createElement(f.a,{item:!0,md:3},h.a.createElement(v.a,{fullWidth:!0,type:"date",name:"eDate",onChange:this.handleChange,label:"Fecha Final",InputLabelProps:{shrink:!0}})),h.a.createElement(f.a,{item:!0,md:2},h.a.createElement(C.a,{variant:"contained",color:"primary",onClick:this.fetchOC},"Buscar"))),h.a.createElement("div",{className:"mt-2"},c.keys.map((function(e){return h.a.createElement(O.a,{key:e},h.a.createElement(g.a,{expandIcon:h.a.createElement(y.a,null,"expanded_more_icon")},e),h.a.createElement(x.a,null,h.a.createElement(k.a,null,h.a.createElement(j.a,null,h.a.createElement(D.a,null,h.a.createElement(w.a,null,"O.C."),h.a.createElement(w.a,null,"Fecha"),h.a.createElement(w.a,null,"Descripci\xf3n"),h.a.createElement(w.a,null,"Detalle"),h.a.createElement(w.a,null,"Cantidad"),h.a.createElement(w.a,null,"Precio"),h.a.createElement(w.a,null,"Total"))),h.a.createElement(P.a,null,c.rows[e].map((function(e){return h.a.createElement(D.a,{key:e.CIDDOCUMENTO},h.a.createElement(w.a,null,e.CSERIEDOCUMENTO+" - "+e.CFOLIO),h.a.createElement(w.a,null,e.CFECHA),h.a.createElement(w.a,null,e.CNOMBREPRODUCTO),h.a.createElement(w.a,null,e.COBSERVAMOV),h.a.createElement(w.a,null,e.CUNIDADESCAPTURADAS),h.a.createElement(w.a,null,e.CPRECIOCAPTURADO),h.a.createElement(w.a,null,e.CNETO))}))))))}))))}}]),t}(h.a.Component);t.default=R}}]);
//# sourceMappingURL=8.756d8185.chunk.js.map